<div class="cardGen colorGeyGradient srCard">
  <div class="cardBody bgwhite w-100 h-100">
    <div class="w-100 h-20 px-2 py-3 position-relative">
      <h2><img src="./assets/images/icon-siteRiskAssessment.svg" class="headingIcon sr" alt="Site Risk"> Site Risk Assessment   <img src="./assets/images/colorkit-black.svg" alt="export" matTooltipPosition="right" class="me-4" matTooltip="This list does not include the Risk in Draft/Not Submitted State"></h2>
    </div>
    <div class="bcpcBtmContent h-80 forsr w-95 position-relative">
      <div class="d-flex justify-content-start h-100">
        <div class="h-100" style="width: 45%;">
          <p class="cardParagraph sr w-100 mb-1">Site Risks discovered in this <br> financial year and their status <br> of closure</p>
          <div class="srTotalAssesment d-flex justify-content-start mb-2">
            <span class="ribbon"></span>
            <div class="totalAsessmentNo w-60">
              <span>{{siteRiskAssessmentsData?.AssessmentsList?.length}}</span>
              <p> Total<br> Assessments </p>
            </div>
            <div class="srasessmentStaus open w-40 position-relative">
              <p class="positionVmiddle">
                <span>{{getOpenAssessmentPer(siteRiskAssessmentsData?.AssessmentsList)| leadingZeroFilter}}<sup>%</sup></span>
                Open
              </p>
            </div>
          </div>
          <div class="srTotalAssesment d-flex justify-content-start bgBlueGrey" style="height: 10vh;">
            <span class="risk-ribbon"></span>
            <div class="totalAsessmentNo totalRisks w-60">
              <span>{{risksListData?.length}}</span>
              <p class="mt-3"> Total<br> Number of Risk </p>
            </div>
            <div class="w-40" style="font-size: 82%;">
              <div class="srRiskStaus closed position-relative h-50" style="border-bottom-left-radius: 0; border-bottom-right-radius: 0;">
                <p class="positionVmiddle">
                  Closed
                  <span style="font-size: 115%;">{{getOpenNClosedRiskCount([7])| leadingZeroFilter}}</span>
                </p>
              </div>
              <div class="srasessmentStaus open position-relative h-50" style="border-top-left-radius: 0; border-top-right-radius: 0;">
                <p class="positionVmiddle">
                  Open
                  <span  style="font-size: 115%;">{{getOpenNClosedRiskCount([1,2,3,4,5,6])| leadingZeroFilter}}</span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="h-100" style="width: 55%;">
          <div class="h-30 ps-2">
            <h3 class="countOR">Top 3 Sites <span>(With High Residual Risk)</span></h3>
            <table class="bcpcCountTable w-100" *ngIf="topSites">
              <tbody>
                <tr>
                  <td style="width: 19%;" class="text-start">Sites: </td>
                  <td style="width: 27%;" matTooltipPosition="above" [matTooltip]="topSites[0]?.SiteName">
                    <div style="font-weight: 700;" class="text-center">{{(topSites[0]?.ShortCode)? topSites[0]?.ShortCode : '-'}}</div>
                  </td>
                  <td style="width: 27%;" matTooltipPosition="above" [matTooltip]="topSites[1]?.SiteName">
                    <div style="font-weight: 700;" class="text-center">{{(topSites[1]?.ShortCode)? topSites[1]?.ShortCode : '-'}}</div>
                  </td>
                  <td style="width: 27%;" matTooltipPosition="above" [matTooltip]="topSites[2]?.SiteName">
                    <div style="font-weight: 700;" class="text-center">{{(topSites[2]?.ShortCode)? topSites[2]?.ShortCode : '-'}}</div>
                  </td>
                </tr>
                <tr>
                  <td style="width: 19%;" class="text-start">Count: </td>
                  <td style="width: 27%;">
                    <div class="text-center">{{topSites[0]?.HighResidualRiskCount| leadingZeroFilter}}</div>
                  </td>
                  <td style="width: 27%;">
                    <div class="text-center">{{topSites[1]?.HighResidualRiskCount| leadingZeroFilter}}</div>
                  </td>
                  <td style="width: 27%;">
                    <div class="text-center">{{topSites[2]?.HighResidualRiskCount| leadingZeroFilter}}</div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="d-flex justify-content-start text-center w-100 h-70 mt-5">
            <div class="w-45 position-relative h-100">
              <div class="srTble tblLeft">
                <h3 class="pt-2">Inherent Risk</h3>
                <table class="bcpcCountTable w-100">
                  <tbody>
                    <tr>
                      <td style="width: 70%; padding-left: 0.4em;" class="text-start">High</td>
                      <td style="width: 30%; padding-right: 0.4em;" class="text-end srTblNo position-relative">
                        {{getInherentNResidualRiskCount('OverallInherentRiskRatingID', 3)| leadingZeroFilter}}<span
                          class="roundStatus high"></span></td>
                    </tr>
                    <tr>
                      <td style="width: 70%; padding-left: 0.4em;" class="text-start">Medium</td>
                      <td style="width: 30%; padding-right: 0.4em;" class="text-end srTblNo position-relative">
                        {{getInherentNResidualRiskCount('OverallInherentRiskRatingID', 2)| leadingZeroFilter}}<span
                          class="roundStatus medium"></span></td>
                    </tr>
                    <tr>
                      <td style="width: 70%; padding-left: 0.4em;" class="text-start">Low</td>
                      <td style="width: 30%; padding-right: 0.4em;" class="text-end srTblNo position-relative">
                        {{getInherentNResidualRiskCount('OverallInherentRiskRatingID', 1)| leadingZeroFilter}}<span
                          class="roundStatus low"></span></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="w-10 h-90 position-relative">
              <!-- <span class="arrowDotted"><img src="./assets/images/arrow-dotted.svg" class="w-100" alt=""></span> -->
            </div>

            <div class="w-45 rrr position-relative h-100">
              <div class="srTble tblRight">
                <h3 class="pt-2">Residual Risk</h3>
                <table class="bcpcCountTable w-100">
                  <tbody>
                    <tr>
                      <td style="width: 70%; padding-left: 0.4em;" class="text-start">High</td>
                      <td style="width: 30%; padding-right: 0.4em;" class="text-end srTblNo">
                        {{getInherentNResidualRiskCount('OverallResidualRiskRatingID', 3)| leadingZeroFilter}}</td>
                    </tr>
                    <tr>
                      <td style="width: 70%; padding-left: 0.4em;" class="text-start">Medium</td>
                      <td style="width: 30%; padding-right: 0.4em;" class="text-end srTblNo">
                        {{getInherentNResidualRiskCount('OverallResidualRiskRatingID', 2)| leadingZeroFilter}}</td>
                    </tr>
                    <tr>
                      <td style="width: 70%; padding-left: 0.4em;" class="text-start">Low</td>
                      <td style="width: 30%; padding-right: 0.4em;" class="text-end srTblNo">
                        {{getInherentNResidualRiskCount('OverallResidualRiskRatingID', 1)| leadingZeroFilter}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
