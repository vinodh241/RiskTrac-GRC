<div class="tab-content topTabContentBg h-9 mx-3">
  <div class="p-1 test-end position-relative h-100" style="z-index: 1;">
    <div class="d-flex justify-content-right align-items-center vmiddleRight filterRight">
      <div class="btnGen customize me-4" id="consolidatedID" (click)="openConsolidatedReportPopUp()"><img src="./assets/images/icon-cr.svg"
          width="20%" alt="Setting"> {{ 'common.consolidatedReport' | translate }}</div>
      <div class="applyFilter addDesktop position-relative test-start me-4" *ngIf="bcManager == 1">
        <button type="button" class="btn btn-dark btnGradient" id="addEditID" (click)="addEdit('add', {})">{{ 'sra.newSiteRiskAssessment' | translate }}</button>
        <span class="position-absolute vmiddleLeft text-white iconPositionLeft"><img
            src="./assets/images/icon-add-desktop.svg"></span>
      </div>

      <div class="d-inline-block position-relative searchInput me-2">
        <input [placeholder]="'common.search' | translate" class="form-control tblfilter" id="filterID" (keyup)="applyFilter($event)">
        <span class="position-absolute vmiddleRight iconPositionRight"><i class="fa fa-search"
            aria-hidden="true"></i></span>
      </div>

    </div>

    <div class="d-flex justify-content-right align-items-center vmiddleLeft filterLeft">
      <div class="position-relative colorStatus scheduled me-4" id="schedule" [ngClass]="{ 'active': assessmentStatusIds.includes(1)}" (click)="filterStatus(1)">
        <span class="vmiddleLeft position-absolute">{{scheduled}}</span>{{ 'sra.statusCards.assessmentsScheduled' | translate }}<br>{{ 'sra.statusCards.assessmentsScheduledLabel' | translate }}
      </div>

      <div class="position-relative colorStatus inprogress me-4" id="inProgressID" [ngClass]="{ 'active': assessmentStatusIds.includes(2)}" (click)="filterStatus(2)">
        <span class="vmiddleLeft position-absolute">{{inProgressCount}}</span>{{ 'sra.statusCards.assessmentsInProgress' | translate }}<br>{{ 'sra.statusCards.assessmentsInProgressLabel' | translate }}
      </div>

      <div class="position-relative colorStatus published me-4" id="completedID" [ngClass]="{ 'active': assessmentStatusIds.includes(3)}" (click)="filterStatus(3)">
        <span class="vmiddleLeft position-absolute">{{completedCount}}</span>{{ 'sra.statusCards.assessmentsPublished' | translate }}<br>{{ 'sra.statusCards.assessmentsPublishedLabel' | translate }}
      </div>
    </div>
  </div>
</div>

<div class="table-model-bg h-80 px-3 w-100 py-4">
  <div class="h-100 pb-3 w-100">
    <div class="cardGen colorGeyGradient h-100">
      <div class="cardBody singleRow w-100 h-100">
        <div class="w-100 h-100 px-2 py-3 position-relative">
          <div class="w-100 h-6 position-relative">
            <h2 class="h-100 text-start"><img src="./assets/images/icon-as.svg" class="headingIcon longBox icokKPI"
                alt="BCP Coverage"> {{ 'sra.pageTitle' | translate }}
            </h2>
            <ul class="position-absolute sraTxt mb-0">
              <li>{{ 'sra.notes.note1' | translate }}</li>
              <li>{{ 'sra.notes.note2' | translate }}</li>
            </ul>
          </div>
          <div class="w-100 h-94 vscroll tableContent">
            <table mat-table [dataSource]="dataSource" matSort class="table-striped" id="sraTable">
              <ng-container matColumnDef="Index">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;;width: 0.5vw;border: 1px solid #fff; padding-left: 10px"> #</th>
                <td mat-cell *matCellDef="let element  let i = index"> {{i+1}}</td>
              </ng-container>

              <ng-container matColumnDef="assessmentCode">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 7vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.assessmentCode' | translate }}</th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;" >
                  <a href="javascript: void(0);" class="tblLnk" *ngIf="element.IsReviewer == 1 || element.IsRiskOwner == 1 || element.IsSiteAdminHead == 1 || element.isBCManager == 1 || element.IsBCSiteChampionID == 1 || element.IsBCSteeringCommitee == 1" (click)="directToAssessmentRisks(element)">{{element.AssessmentCode}}</a>
                  <a href="javascript: void(0);" class="tblLnk" *ngIf="element.IsReviewer == 0 && element.IsRiskOwner == 0 && element.IsSiteAdminHead == 0 && element.isBCManager == 1 && element.IsBCSiteChampionID == 1 "  [ngClass]="{'disabled-btn': element.IsReviewer == 0}">{{element.AssessmentCode}}</a></td>
                  <!-- <a href="javascript: void(0);" class="tblLnk" *ngIf="element.IsReviewer == 0 && element.IsRiskOwner == 0"  [ngClass]="{'disabled-btn': element.IsReviewer == 0}">{{element.AssessmentCode}}</a></td> -->
              </ng-container>

              <ng-container matColumnDef="assessmentName">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 12vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.assessmentName' | translate }}</th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;"><label class="link">{{element.AssessmentName}}</label></td>
              </ng-container>



              <ng-container matColumnDef="site">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 8vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.site' | translate }}</th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;"
                  ><label class="link">
                    {{element.SiteName}}</label></td>
              </ng-container>

              <ng-container matColumnDef="startDate">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 5vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.startDate' | translate }}
                </th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;"> {{element.StartDate|date:'MMM d,y'}} </td>
              </ng-container>

              <ng-container matColumnDef="endDate">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 5vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.endDate' | translate }}
                </th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;"> {{element.EndDate|date:'MMM d, y'}}
                </td>
              </ng-container>

              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 6vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.status' | translate }}
                </th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;">
                  <span class="statusID" [ngClass]="(element.StatusID == 1) ? 'statusScheduled' : (element.StatusID == 2) ? 'statusInprogress' : 'statusPublished'"
                  >{{element.Status}}</span></td>
              </ng-container>

              <ng-container matColumnDef="progress">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 8vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.progress' | translate }}</th>
                <td mat-cell *matCellDef="let element" >
                  <div class="d-flex justify-content-center px-2 w-90">
                    <div class="progress tableProgress w-90" style="margin-right: 1vh;">
                      <div [ngClass]="{ 'progress-bar': (element.OverallCompletionPercentage).replace('%','') < 99, 'color-class-Complete': (element.OverallCompletionPercentage).replace('%','') == 100 }"
                        [ngStyle]="{ 'width': element.OverallCompletionPercentage, 'background-color': getColor(element.OverallCompletionPercentage) }">
                      </div>
                    </div>
                    <div class="w-10 test-start fontSize13rem">{{element.OverallCompletionPercentage}}</div>
                  </div>
                </td>
              </ng-container>
              <ng-container matColumnDef="siteChampion">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 3vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.bcSiteChampion' | translate }}</th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;"> {{element.BCSiteChampionName}} </td>
              </ng-container>

              <ng-container matColumnDef="reviwer">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 3vw;border: 2px solid white;padding-left: 10px;">{{ 'sra.columns.reviewer' | translate }}</th>
                <td mat-cell *matCellDef="let element" style="padding-left: 10px;"> {{element.ReviewerName}} </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef
                  style="background-color:#e4e4e4;width: 9%;border: 2px solid white;border-right: 1px solid #fff; padding-left: 8px;">
                </th>
                <td mat-cell *matCellDef="let row" style="width: 9%; padding-left: 8px;text-align: center;">
                  <button mat-icon-button class="example-icon custom-button" id="editButton" [ngClass]="{'disabled-btn': isDisabled(row)}" [disabled]="isDisabled(row)" (click)="addEdit('edit', row)">
              <img src="assets/images/icon-edit.svg" alt="edit">
          </button>

          <button mat-icon-button class="example-icon custom-button" [id]="'delete'" [ngClass]="{'disabled-btn': isDisabled(row)}" [disabled]="isDisabled(row)" (click)="deleteSiteAssessment(row)">
              <img src="./assets/images/icon-delete-black.svg">
          </button>

                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true" style="background-color:  rgb(207, 205, 205);">
              </tr>
              <tr mat-row *matRowDef="let row; let i = index columns: displayedColumns;"></tr>
              <tr *matNoDataRow><td [attr.colspan]="displayedColumns.length">{{ 'common.noDataFound' | translate }}</td></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
